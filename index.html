<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Love Coin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f0f0f;
  color:white;
  display:flex;
  flex-direction:column;
  height:100vh;
  overflow:hidden;
}

.page{
  flex:1;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  position:relative;
}

.active{
  display:flex;
}

/* تعداد سکه کمی بالاتر از سکه */
.counter{
  font-size:28px;
  font-weight:bold;
  margin-bottom:30px; /* فاصله بیشتر از نور دور سکه */
}

.coinImg{
  width:230px;
  height:230px;
  object-fit:contain;
  cursor:pointer;
  transition:transform 0.1s;
  filter: drop-shadow(0 0 25px gold);
  user-select:none;
  -webkit-user-drag:none;
  -webkit-tap-highlight-color: transparent;
}

.plusOne {
  position:absolute;
  color:gold;
  font-weight:bold;
  font-size:22px;
  animation: floatUp 0.8s forwards;
  pointer-events:none;
}

@keyframes floatUp {
  0% { opacity:1; transform: translateY(0); }
  100% { opacity:0; transform: translateY(-60px); }
}

.energyBox{
  width:220px;
  height:12px;
  background:#222;
  border-radius:10px;
  overflow:hidden;
  position:absolute;
  bottom:80px;
}

.energyFill{
  height:100%;
  width:100%;
  background:linear-gradient(90deg, gold, orange);
  transition:width 0.2s;
}

.energyText{
  font-size:14px;
  color:#aaa;
  position:absolute;
  bottom:60px;
  text-align:center;
  width:100%;
}

.navbar{
  height:70px;
  background:#181818;
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top:1px solid #333;
}

.navbtn{
  color:#888;
  font-size:14px;
  cursor:pointer;
}

.navbtn.active{
  color:gold;
  font-weight:bold;
}
</style>
</head>

<body>

<div id="home" class="page active">
  <div class="counter">Love Coin: <span id="count">0</span></div>

  <img id="loveCoinImg"
       src="https://cdn.imgurl.ir/uploads/p719635__.png"
       class="coinImg">

  <div class="energyBox">
    <div id="energyFill" class="energyFill"></div>
  </div>
  <div class="energyText">
    Energy: <span id="energyText">100</span> / 100
  </div>
</div>

<div id="shop" class="page">
  <h2>Shop</h2>
  <p>Coming Soon...</p>
</div>
  
<div id="profile" class="page">
  <h2>Profile</h2>
  <p>Coming Soon...</p>
</div>

<div id="settings" class="page">
  <h2>Settings</h2>
  <p>Coming Soon...</p>
</div>

<div class="navbar">
  <div class="navbtn active" onclick="showPage('home', this)">Home</div>
  <div class="navbtn" onclick="showPage('shop', this)">Shop</div>
  <div class="navbtn" onclick="showPage('profile', this)">Profile</div>
  <div class="navbtn" onclick="showPage('settings', this)">Settings</div>
</div>

<script>
let count = localStorage.getItem("loveCoin");
count = count ? parseInt(count) : 0;

let energy = localStorage.getItem("energy");
energy = energy ? parseInt(energy) : 100;

const maxEnergy = 100;

const countEl = document.getElementById("count");
const energyText = document.getElementById("energyText");
const energyFill = document.getElementById("energyFill");
const coinImg = document.getElementById("loveCoinImg");

countEl.innerText = count;
updateEnergyUI();

function updateEnergyUI(){
  energyText.innerText = energy;
  energyFill.style.width = (energy / maxEnergy * 100) + "%";
  localStorage.setItem("energy", energy);
}

// چند انگشتی + هرجا روی سکه
function handleTouchOrClick(e){
  e.preventDefault();
  let positions = [];

  if(e.type === 'touchstart'){
    for(let i=0;i<e.touches.length;i++){
      positions.push({x:e.touches[i].clientX, y:e.touches[i].clientY});
    }
  }else{
    positions.push({x:e.clientX, y:e.clientY});
  }

  if(energy <=0) return;

  // به ازای هر لمس، 1 سکه
  positions.forEach(pos=>{
    if(energy <=0) return; // هر انگشت فقط اگر انرژی هست اجرا میشه

    count++;      // هر انگشت +1
    energy--;     // هر انگشت -1
    if(energy<0) energy=0;

    localStorage.setItem("loveCoin", count);
    countEl.innerText = count;
    updateEnergyUI();

    // افکت پاپ روی سکه
    coinImg.style.transform="scale(1.1)";
    setTimeout(()=>coinImg.style.transform="",100);

    // +1 همان نقطه لمس
    const plus=document.createElement("div");
    plus.innerText="+1";
    plus.classList.add("plusOne");
    plus.style.left = pos.x + "px";
    plus.style.top = pos.y + "px";
    document.getElementById("home").appendChild(plus);
    setTimeout(()=>plus.remove(),800);
});
  }

coinImg.addEventListener("touchstart", handleTouchOrClick);
coinImg.addEventListener("click", handleTouchOrClick);

// شارژ خودکار
setInterval(()=>{
  if(energy < maxEnergy){
    energy++;
    updateEnergyUI();
  }
},1000);

function showPage(pageId, btn){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.querySelectorAll(".navbtn").forEach(b=>b.classList.remove("active"));
  document.getElementById(pageId).classList.add("active");
  btn.classList.add("active");
}
</script>

</body>
</html>
